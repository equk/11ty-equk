<!doctype html>
<html lang="{{ metadata.language }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% if title %}
    <title>{{ title + " - " + metadata.title }}</title>
    {% else %}
    <title>{{ metadata.title }}</title>
    {% endif %}

    <link rel="alternate" href="/atom.xml" type="application/atom+xml" title="{{ metadata.title }}">

    {#- Uncomment this if youâ€™d like folks to know that you used Eleventy to build your site!  #}
    <meta name="generator" content="{{ eleventy.generator }}">

    <link rel="icon" type="image/png" sizes="96x96" href="/img/icon-96x96.png">

    {# Webmentions links using webmention.io #}
    <link rel="webmention" href="https://webmention.io/equk.co.uk/webmention" />
    {# Forward pingbacks to webmentions #}
    <link rel="pingback" href="https://webmention.io/webmention?forward=https://webmention.io/equk.co.uk/webmention" />

    {# Meta tags #}
    <meta name="description" content="{{ metadata.description }}">
    <meta name="robots" content="index,follow">
    <meta name="author" content="{{ metadata.author.name }}">
    <link rel="canonical" href="{{ metadata.url + page.url }}">

    {# OpenGraph tags #}
    {% if title %}
    <meta property="og:title" content="{{ title + " - " + metadata.title }}">
    {% else %}
    <meta property="og:title" content="{{ metadata.title }}">
    {% endif %}
    {% if ogtype %}
    <meta property="og:type" content="{{ ogtype }}">
    {% else %}
    <meta property="og:type" content="article">
    {% endif %}
    <meta property="og:url" content="{{ metadata.url + page.url }}">
    <meta property="og:description" content="{{ metadata.description }}">
    <meta property="og:image" content="{{ metadata.url + '/media/social.png' }}">

    {# Fediverse creator info #}
    <meta name="fediverse:creator" content="@equilibriumuk@hachyderm.io" />

    {# Preload fonts used in site #}
    <link rel="preload" href="/fonts/inter-var-latin.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/opensans_r.woff2" as="font" type="font/woff2" crossorigin>

    {# Reference css as link in devmode to fix livreload #}
    {% if isdev %}
    <link rel="stylesheet" href="/css/styles.css">
    {% else %}
    {# Bundle postcss generated output #}
    {%- css %}{% include "src/_assets/css/styles.css" %}{% endcss %}
    {#- Render the CSS bundle using Inlined CSS (for the fastest site performance in production) #}
    <style>{% getBundle "css" %}</style>
    {% endif %}

    {# Bundle esbuild generated output #}
    {%- js %}{% include "src/_assets/js/darkmode.js" %}{% endjs %}
    {%- js %}{% include "src/_assets/js/mobilenav.js" %}{% endjs %}
    <script type="module">{% getBundle "js" %}</script>
  </head>
  <body>
    <div class="page-wrapper">

      {% include "base/header.njk" %}

        {{ content | safe }}

      {% include "base/footer.njk" %}

      {% if isdev %}
      <!-- Current page: {{ page.url | htmlBaseUrl }} -->
      {% endif %}
    </div>
  </body>
</html>
{% include "base/foot.njk" %}